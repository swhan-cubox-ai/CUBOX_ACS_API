<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aero.cubox.api.mdm.mapper.MdmMapper">

	<select id="test" resultType="map">
		SELECT *
		FROM tc_em_cgpn
		WHERE rownum <![CDATA[<=]]> #{count}
	</select>

	<select id="getMdmInsttCount" resultType="map">
		SELECT count(*) as cnt
		FROM   TI_CMN_INSTT_RCV
		WHERE process_yn_mdmsjsc = 'N'
	</select>

	<select id="getMdmInsttRcv" resultType="map">
		SELECT cntc_sn,
			   instt_code AS instt_cd,
			   instt_nm,
			   lowest_instt_code AS dept_cd,
			   lowest_instt_nm AS dept_nm,
			   process_yn_mdmsjsc,
			   DECODE(instt_code, lowest_instt_code, 'Y', 'N') AS instt_yn
		FROM   TI_CMN_INSTT_RCV
		WHERE process_yn_mdmsjsc = 'N'
		ORDER BY lowest_instt_code
		LIMIT 10
	</select>


	<update id="updateMdmInsttRcv" parameterType="map">
		UPDATE TI_CMN_INSTT_RCV
		SET process_yn_mdmsjsc = 'Y'
		WHERE cntc_sn = #{cntc_sn}
	</update>
</mapper>